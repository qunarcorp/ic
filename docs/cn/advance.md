[上一页](query.md)
[回目录](../../README.md)


# 进阶说明

### consumer使用长轮询方式监听消息的实时性改进
在实际实际使用时，我们在去哪儿内部是集成了QMQ的，每个消息在可以被消费时会发出一个QMQ消息，所以在consumer发起长轮询时，IC随时监听QMQ消息，当有新消息时会立马返回给consumer，提高实时性。但在开源版本中为了提高IC服务部署的简洁性，去掉了对QMQ的依赖，当consumer发起长轮询时返回新消息可能会有两秒的延时。

### 新增消息类型和新增生产者的说明
在开源版本中，我们没有给管理员提供配置界面，都是直接操作的数据库，在使用上便捷性可能不是很友好，因为在去哪儿内部，我们开发了另一个系统最为管理员操作页面，这个系统直接操作IC的mongodb数据库，没有和IC集成到一起。
下图是消息从产生到消费的时序图:



[上一页](query.md)
[回目录](../../README.md)